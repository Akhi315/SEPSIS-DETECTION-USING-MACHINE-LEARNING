#include <OneWire.h>
#include <DallasTemperature.h>

// Data wire connected to GPIO 4
#define ONE_WIRE_BUS 4

// Setup a oneWire instance to communicate with DS18B20
OneWire oneWire(ONE_WIRE_BUS);

// Pass the oneWire reference to Dallas Temperature sensor
DallasTemperature sensors(&oneWire);

void setup() {
  Serial.begin(115200); // Start serial communication at 115200 baud
  sensors.begin();      // Start the DS18B20 sensor
  Serial.println("Temperature sensor test");
}

void loop() {
  sensors.requestTemperatures();               // Send command to get temperatures
  float temperature = sensors.getTempCByIndex(0); // Get the temperature in Celsius
  
  if (temperature == DEVICE_DISCONNECTED_C) {
    Serial.println("Error: Sensor not connected");
  } else {
    Serial.print("Current Temperature: ");
    Serial.print(temperature);
    Serial.println(" Â°C");
  }
  
  delay(5000); // Wait for 5 seconds before reading again
}
